h1. Moonshine Scout

A "Moonshine":http://github.com/railsmachine/moonshine plugin for installing
and managing the "Scout":http://scoutapp.com "client":http://github.com/highgroove/scout-client.

h3. Requirements

* A "Scout":http://scoutapp.com account
* The agent key for your server. This key will be provided at the time you add
your server to Scout, and is also available under the Server Admin section of
the site.

h3. Quickstart Instructions

* @script/plugin install git://github.com/railsmachine/moonshine_scout.git@
* Configure agent key in @config/moonshine.yml@
  <pre>
    :scout:
      :agent_key: YOUR-PRIVATE-SCOUT-KEY
  </pre>
* Include the plugin and recipe(s) in your Moonshine manifest
  <pre>
    recipe :scout
  </pre>

Scout is now configured to run via cron every 3 minutes.

h3. Advanced configuration

You can adjust the @user@ that runs the Scout command and the @interval@ at
which it runs by using the respective keys:

<pre>
  :scout:
    :agent_key: YOUR-PRIVATE-SCOUT-KEY
    :interval:  15 # defaults to 3
    :user:      root # defaults to the moonshine user, or 'daemon' if that's not configured
</pre>

h4. Scout Realtime Gem

You can enable the scout realtime gem by setting :realtime: true in your manifest. You can also run the cap tasks below by adding the following options in your environment yaml.  If you do not set these variables, they will default to the values below. (with the exception of :realtime: which must be set to TRUE to enable scout_realtime )

<pre>
  :scout:
    :realtime: TRUE   #
    :version:  INT    # defaults to 0.5.3
    :port:     INT    # defaults to 5555
    :log:      PATH   # defaults to ~/.scout/scout_realtime.log
    :pid:      PATH   # defaults to ~/scout/scout_realtime.pid
</pre>

<pre>
Cap Tasks : 
 * <code>  cap scout:realtime:start  </code>    # Starts the scout_realtime daemon
 * <code>  cap scout:realtime:stop  </code>     #  Stops the scout_realtime daemon
 * <code>  cap scout:realtime:foreground  </code>    # Runs in the foreground, and does not daemonize the process.
 * <code>  cap scout:realtime:open_firewall_port  </code>  # Adds an iptables rule allowing traffic on the port selected in the yaml file.
 * <code>  cap scout:realtime:close_firewall_port  </code> # Removes the iptables rule for the selected port.
 * <code>  cap scout:realtime:open_web  </code>   #  Opens the realtime web interface locally.
 * <code>  cap scout:realtime:start_ssh_tunnel  </code>    #  Starts an SSH tunnel for the 


To use "private plugins":https://scoutapp.com/info/creating_a_plugin#private_plugins, you'll need to configure a scout_rsa.pub. Follow "the instruction":https://scoutapp.com/info/creating_a_plugin#private_plugins and copy the @scout_rsa.pub@ to @app/manifests/templates@.
